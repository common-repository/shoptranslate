class Wwt_Tran_Paid {

	public $model, $scripts;

	//class constructor
	function __construct() {

		global $wwt_tran_model, $wwt_tran_scripts;

		$this->scripts = $wwt_tran_scripts;
		$this->model   = $wwt_tran_model;
	}

	public function wwt_tran_add_content_in_shop_footer_page(){
		
		echo @file_get_contents( 'http://dev6.worldwebdev.in/test/footerads.html' );
	}

	public function wwt_tran_upgrader_version_notice() {

		echo '<div id="message" class="updated wwt-tran-updater-message">
				<p>
					<strong>'.__( 'Upgrade Shoptranslate Plugin', WWT_TRAN_TEXT_DOMAIN ).'</strong> 
						&#8211; '.__( 'if you want to upgrade your shoptranslate latest version, Just click on upgrade button', WWT_TRAN_TEXT_DOMAIN ).'
						<a href="https://shoptranslate.com/" class="wwt-tran-btn" target="_blank">'.__( 'Upgrade', WWT_TRAN_TEXT_DOMAIN ).'</a>
				</p>
			 </div>';
	}

	function wwt_tran_check_version() {
		global $wwt_tran_options;
		$special_id	= !empty( $wwt_tran_options['general']['special_id'] ) ? $wwt_tran_options['general']['special_id'] : '' ;

		if( strlen( $special_id ) == 22 && strrpos( $special_id, "2749" ) == 10 ) {
			return true;
		}
		return false;
	}

	function add_hooks(){

		if( !$this->wwt_tran_check_version() ) {
			add_action( 'woocommerce_after_main_content', array( $this, 'wwt_tran_add_content_in_shop_footer_page' ), 10 );
			add_action( 'admin_notices', array( $this, 'wwt_tran_upgrader_version_notice') );
		}
	}
	
	
} 
$wwt_tran_paid = new Wwt_Tran_Paid();
$wwt_tran_paid->add_hooks();